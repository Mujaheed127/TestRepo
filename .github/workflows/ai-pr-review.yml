
name: AI PR Review

on:
  pull_request:
    types: [opened, synchronize]

jobs:
  ai-review:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v3

      - name: Call GitHub Model for PR Review
        run: |
          curl -L \
            -X POST \
            -H "Accept: application/vnd.github+json" \
            -H "Authorization: Bearer ${{ secrets.GITHUB_PAT }}" \
            -H "X-GitHub-Api-Version: 2022-11-28" \
            -H "Content-Type: application/json" \
            https://models.github.ai/inference/chat/completions \
            -d '{
              "model":"openai/gpt-4.1",
              "messages":[
                {"role":"system","content":"You are a code reviewer focusing on security and best practices."},
                {"role":"user","content":"Review this PR: ${{ github.event.pull_request.html_url }}"}
              ]
            }'
